Version 4
SHEET 1 880 680
WIRE 592 144 32 144
WIRE -464 192 -464 112
WIRE 32 224 32 144
WIRE 592 256 592 224
WIRE 704 256 592 256
WIRE 592 288 592 256
WIRE -464 384 -464 272
WIRE 32 384 32 304
WIRE 288 384 32 384
WIRE 368 384 288 384
WIRE 528 384 448 384
WIRE 592 384 592 368
WIRE 592 384 528 384
WIRE 32 416 32 384
WIRE 288 544 288 384
WIRE 384 544 288 544
WIRE 528 544 528 384
WIRE 528 544 448 544
FLAG 32 416 0
FLAG 704 256 Vout
FLAG 384 432 0
FLAG 432 432 ctrl
FLAG -464 384 0
FLAG -464 112 ctrl
SYMBOL res 576 128 R0
SYMATTR InstName R1
SYMATTR Value {R}
SYMBOL voltage 32 208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {Ui}
SYMBOL ind 576 272 R0
SYMATTR InstName L1
SYMATTR Value {L_R}
SYMBOL sw 352 384 R270
SYMATTR InstName S1
SYMATTR Value myswitch
SYMBOL voltage -464 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(-10 10 0 1e-9 1e-9 {d*T} {T})
SYMBOL diode 384 560 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value mydiode
TEXT 0 440 Left 2 !.tran 0 {5*T} 0 1e-9
TEXT 104 80 Left 2 ;Voltage Divider
TEXT 16 -48 Left 2 !.PARAM Ui=10
TEXT 16 -8 Left 2 !.PARAM R =1
TEXT -400 -88 Left 2 !.PARAM F=20e3
TEXT -400 -48 Left 2 !.step PARAM d  0.1 0.5 0.1
TEXT -400 -16 Left 2 !.PARAM  T={1/f}
TEXT -392 -184 Left 2 !.MODEL mySwitch SW(Ron=1e-3 Roff=100Meg Von=10 Voff=-10)
TEXT -392 -144 Left 2 !.MODEL myDiode D(Vfwd=0 Rs=1e-3 BV=100k Vrev=100k)
TEXT 16 16 Left 2 !.PARAM L_R  = 10u
