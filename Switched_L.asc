Version 4
SHEET 1 880 680
WIRE 560 80 0 80
WIRE -496 128 -496 48
WIRE 0 160 0 80
WIRE 560 192 560 160
WIRE 672 192 560 192
WIRE 560 224 560 192
WIRE -496 320 -496 208
WIRE 0 320 0 240
WIRE 256 320 0 320
WIRE 336 320 256 320
WIRE 496 320 416 320
WIRE 560 320 560 304
WIRE 560 320 496 320
WIRE 0 352 0 320
WIRE 256 480 256 320
WIRE 352 480 256 480
WIRE 496 480 496 320
WIRE 496 480 416 480
FLAG 0 352 0
FLAG 672 192 Vout
FLAG 352 368 0
FLAG 400 368 ctrl
FLAG -496 320 0
FLAG -496 48 ctrl
SYMBOL res 544 64 R0
SYMATTR InstName R1
SYMATTR Value {R}
SYMBOL voltage 0 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {Ui}
SYMBOL ind 544 208 R0
SYMATTR InstName L1
SYMATTR Value {L_R}
SYMBOL sw 320 320 R270
SYMATTR InstName S1
SYMATTR Value myswitch
SYMBOL voltage -496 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(-10 10 0 1e-9 1e-9 {d*T} {T})
SYMBOL diode 352 496 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value mydiode
TEXT -32 376 Left 2 !.tran 0 {5*T} 0 1e-9
TEXT 72 16 Left 2 ;Voltage Divider
TEXT -16 -112 Left 2 !.PARAM Ui=10
TEXT -16 -72 Left 2 !.PARAM R =1
TEXT -432 -152 Left 2 !.PARAM F=20e3
TEXT -432 -112 Left 2 !.step PARAM d  0.1 0.5 0.1
TEXT -432 -80 Left 2 !.PARAM  T={1/f}
TEXT -424 -248 Left 2 !.MODEL mySwitch SW(Ron=1e-3 Roff=100Meg Von=10 Voff=-10)
TEXT -424 -208 Left 2 !.MODEL myDiode D(Vfwd=0 Rs=1e-3 BV=100k Vrev=100k)
TEXT -16 -48 Left 2 !.PARAM L_R  = 10u
